(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,n,t){e.exports=t(46)},23:function(e,n,t){},44:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),i=t(14),r=t.n(i),s=(t(23),t(2)),l=t(3),c=t(5),d=t(4),u=t(6),p=t(15),h=t.n(p),f=t(16),m=t.n(f),g=function(e){function n(){return Object(s.a)(this,n),Object(c.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.query,a=n.onFilter;return o.a.createElement("div",{tabIndex:"-1"},o.a.createElement("header",{className:"column navbar is-primary"},o.a.createElement("div",{className:"is-hidden-desktop","aria-live":"assertive","aria-atomic":"true"},o.a.createElement("input",{onFocus:function(){return e.props.handleDatalistFocus()},onBlur:function(){return e.props.handleDatalistBlur()},defaultValue:"",value:t,onChange:function(e){return a(e.target.value)},placeholder:"Input is case sensitive",list:"myLocations",id:"location-choice",name:"location-choice","aria-label":"Search locations (Case Sensitive"}),o.a.createElement("datalist",{id:"myLocations",style:{margin:"auto"}},this.props.locations.map(function(e){return o.a.createElement("option",{key:e.referralId+e.venue.name},e.venue.name)}))),o.a.createElement("input",{className:"is-hidden-touch",defaultValue:"",onFocus:function(){return e.props.handleDatalistFocus()},onBlur:function(){return e.props.handleDatalistBlur()},value:t,onChange:function(e){return a(e.target.value)},placeholder:"Input is case sensitive",type:"text",name:"location-choice","aria-label":"Search Locations (Case Sensitive"})))}}]),n}(a.Component),v=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={mapWasCalled:!1},t.loadAPI=function(){var e=new window.google.maps.Map(document.getElementById(t.props.mapId),t.props.options);window.map=e},t.loadMarkers=function(e,n){var a=new window.google.maps.InfoWindow;a.close(),window.markers.forEach(function(e){return e.setMap(null)});var o={url:"https://prnautica.com/wp-content/uploads/2015/12/map-marker-icon.png",size:new window.google.maps.Size(25,25),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(25,25)};n.forEach(function(i,r){window.markers.push(r=new window.google.maps.Marker({position:{lat:i.venue.location.lat,lng:i.venue.location.lng},icon:o,animation:null,map:e,title:i.venue.name})),t.props.focusedLoc===i.referralId|1===n.length&&(r.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){return r.setAnimation(null)},700),setTimeout(function(){a.setContent('<div class="infoWindow">\n            <div class="infoWindowHeader"><strong>'.concat(i.venue.name,"</strong></div>\n            <br>\n            <div><strong>Description:</strong> ").concat(i.venue.categories[0].shortName,"</div>\n            <div><strong>Address:</strong> ").concat(i.venue.location.formattedAddress[0],", ").concat(i.venue.location.formattedAddress[1],"</div>\n            <div><strong>Provided by: </strong>SquareSpace</div>\n          </div>")),1==t.props.infoWindow?a.open(e,r):console.log("False")},1200)),t.listenInfoWindowChange(e,r,i,a)})},t.listenInfoWindowChange=function(e,n,t,a){n.addListener("click",function(){a.setContent('<div class="infoWindow">\n        <div class="infoWindowHeader"><strong>'.concat(t.venue.name,"</strong></div>\n        <br>\n        <div><strong>Description:</strong> ").concat(t.venue.categories[0].shortName,"</div>\n        <div><strong>Address:</strong> ").concat(t.venue.location.formattedAddress[0],", ").concat(t.venue.location.formattedAddress[1],"</div>\n        <div><strong>Provided by: </strong>SquareSpace</div>\n\n      </div>"))})},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(window.markers=[],!window.google){var n=document.createElement("script");n.src="https://maps.google.com/maps/api/js?key=AIzaSyCVQUeNoVu_7zHcGYSkSJ-BY1dU6hB_7gM",n.async=!0,n.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t),n.addEventListener("load",function(n){e.loadAPI()})}}},{key:"render",value:function(){var e=this;return!1===navigator.onLine&&!1===this.state.mapWasCalled&&(window.alert("No connection detected. The map may not display properly"),this.setState({mapWasCalled:!0})),setTimeout(function(){e.loadMarkers(window.map,e.props.locations)},1e3),o.a.createElement("section",{className:this.props.mapId,style:{height:"95vh"},id:this.props.mapId,"aria-label":this.props.mapId})}}]),n}(a.Component),w=(t(44),function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={startingPlaces:[],query:"",alreadyCalled:!1,badConnectionCalled:!1,infoWindow:!1,focusedLoc:""},t.getDetailsAPI=function(){if(localStorage.locations)t.setState({startingPlaces:JSON.parse(localStorage.locations)});else{h.a.get("https://api.foursquare.com/v2/venues/explore?"+new URLSearchParams({client_id:"NRQZ3OTXP3KJH05HXL3RKRKRTF3WJW4MCNMHZFPIY3HKVWHH",client_secret:"GTDZ10LLV2HYUJBTSRWV1ULDBWKXBJDZ5EQ4HAEZTCVG4AL4",query:"food",ll:"-22.906151,-43.110378",v:"20190223",radius:1e3})).then(function(e){localStorage.setItem("locations",JSON.stringify(e.data.response.groups[0].items)),t.setState({startingPlaces:e.data.response.groups[0].items})}).catch(function(e){return console.log(e.response)})}},t.handleFilter=function(e){t.setState({query:e.trim(),alreadyCalled:!1,badConnectionCalled:!1})},t.handleLocFocus=function(e){t.setState({focusedLoc:e.referralId,infoWindow:!0})},t.handleBlur=function(e){return t.setState({infoWindow:!1})},t.handleLocButtonInput=function(e){var n=[];n.push(e),t.setState({startingPlaces:n})},t.handleBackButtonInput=function(){t.setState({query:"",alreadyCalled:!1,badConnectionCalled:!1}),t.getDetailsAPI()},t.handleDatalistFocus=function(){t.setState({infoWindow:!0})},t.handleDatalistBlur=function(){t.setState({infoWindow:!1})},t.handleAlreadyCalled=function(){return t.setState({alreadyCalled:!0})},t.handleBadConnectionCalled=function(){return t.setState({badConnectionCalled:!0})},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getDetailsAPI()}},{key:"render",value:function(){var e=this,n=this.state.query,t=[];if(n.length>0){var a=new RegExp(m()(n,"i"));t=this.state.startingPlaces.filter(function(e){return a.test(e.venue.name)})}else t=this.state.startingPlaces;return 0!==n.length&&!0===navigator.onLine&&0===t.length&&!1===this.state.alreadyCalled?(window.alert("The location you're looking for was not found."),this.handleAlreadyCalled()):0!==n.length&&!1===navigator.onLine&&0===t.length&&!1===this.state.badConnectionCalled&&(window.alert("Please check your connection."),this.handleBadConnectionCalled()),o.a.createElement("div",{className:"App"},o.a.createElement(g,{locations:t,onFilter:this.handleFilter,handleDatalistFocus:this.handleDatalistFocus,handleDatalistBlur:this.handleDatalistBlur}),o.a.createElement("main",null,o.a.createElement("aside",{className:"menu column is-2-desktop is-hidden-touch",style:{overflowY:"scroll",scrollBehavior:"smooth"},"aria-label":"locations returned from the search"},o.a.createElement("ul",{className:"menu-list"},t.map(function(n){return o.a.createElement("li",{key:n.venue.name+n.referralId,onFocus:function(){return e.handleLocFocus(n)},onBlur:function(){return e.handleBlur(n)},onKeyPress:function(){return e.handleLocButtonInput(n)},onClick:function(){return e.handleLocButtonInput(n)}},o.a.createElement("a",{tabIndex:"0"},n.venue.name))}),o.a.createElement("li",null,o.a.createElement("button",{className:"button is-small is-danger",onKeyPress:function(){return e.handleBackButtonInput()},onClick:function(){return e.handleBackButtonInput()},style:11===t.length|30===t.length?{display:"none",tabIndex:0}:{tabIndex:0}},"Back")))),o.a.createElement(v,{mapId:"map",options:{center:{lat:-22.906151,lng:-43.110378},zoom:15},locations:t,focusedLoc:this.state.focusedLoc,infoWindow:this.state.infoWindow})))}}]),n}(a.Component)),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(w,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("","/service-worker.js");y?(function(e,n){fetch(e).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):b(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):b(n,e)})}}()}},[[17,2,1]]]);
//# sourceMappingURL=main.610e9e2f.chunk.js.map